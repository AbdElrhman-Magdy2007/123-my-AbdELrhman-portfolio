"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3390],{23390:(e,a,r)=>{r.d(a,{default:()=>ec});var t=r(95155),o=r(12115),i=r(35695),n=r(58918),d=r(60760),l=r(46671),s=r(53607),c=r(77052),u=r(34477);let p=(0,u.createServerReference)("7f037ef4a566eb36dde6b63144cea728cf95e8ddba",u.callServer,void 0,u.findSourceMapURL,"updateProduct"),g=(0,u.createServerReference)("7f15d8994e1cfe0aacf31b9bda9cd6d54589a423d8",u.callServer,void 0,u.findSourceMapURL,"addProduct"),m=(0,u.createServerReference)("7f404aa6c5512d29a120e0d9900c9e3a924ce291e8",u.callServer,void 0,u.findSourceMapURL,"deleteProduct");var x=r(56671),f=r(59434),h=r(6874),b=r.n(h),y=r(66766),v=r(30285),j=r(95398),N=r(66474);let w=j.bL,A=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,t.jsx)(j.q7,{ref:a,className:(0,f.cn)("border-b",r),...o})});A.displayName="AccordionItem";let k=o.forwardRef((e,a)=>{let{className:r,children:o,...i}=e;return(0,t.jsx)(j.Y9,{className:"flex",children:(0,t.jsxs)(j.l9,{ref:a,className:(0,f.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...i,children:[o,(0,t.jsx)(N.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});k.displayName=j.l9.displayName;let C=o.forwardRef((e,a)=>{let{className:r,children:o,...i}=e;return(0,t.jsx)(j.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,t.jsx)("div",{className:(0,f.cn)("pb-4 pt-0",r),children:o})})});C.displayName=j.UC.displayName;var P=r(90017),S=r(47863),F=r(5196);let R=P.bL,E=P.YJ,D=P.WT,I=o.forwardRef((e,a)=>{let{className:r,children:o,...i}=e;return(0,t.jsxs)(P.l9,{ref:a,className:(0,f.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[o,(0,t.jsx)(P.In,{asChild:!0,children:(0,t.jsx)(N.A,{className:"h-4 w-4 opacity-50"})})]})});I.displayName=P.l9.displayName;let T=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,t.jsx)(P.PP,{ref:a,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",r),...o,children:(0,t.jsx)(S.A,{className:"h-4 w-4"})})});T.displayName=P.PP.displayName;let M=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,t.jsx)(P.wn,{ref:a,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",r),...o,children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})});M.displayName=P.wn.displayName;let U=o.forwardRef((e,a)=>{let{className:r,children:o,position:i="popper",...n}=e;return(0,t.jsx)(P.ZL,{children:(0,t.jsxs)(P.UC,{ref:a,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...n,children:[(0,t.jsx)(T,{}),(0,t.jsx)(P.LM,{className:(0,f.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,t.jsx)(M,{})]})})});U.displayName=P.UC.displayName,o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,t.jsx)(P.JU,{ref:a,className:(0,f.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...o})}).displayName=P.JU.displayName;let B=o.forwardRef((e,a)=>{let{className:r,children:o,...i}=e;return(0,t.jsxs)(P.q7,{ref:a,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(P.VF,{children:(0,t.jsx)(F.A,{className:"h-4 w-4"})})}),(0,t.jsx)(P.p4,{children:o})]})});B.displayName=P.q7.displayName,o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,t.jsx)(P.wv,{ref:a,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",r),...o})}).displayName=P.wv.displayName;var O=r(85057),L=r(52596);let q={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.3}},hover:{scale:1.02,transition:{duration:.2}},tap:{scale:.98,transition:{duration:.1}}},z={initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-10,transition:{duration:.2}}},H={initial:{opacity:0,x:-10},animate:{opacity:1,x:0,transition:{duration:.2}}},V=o.memo(function(e){let{categories:a,categoryId:r,setCategoryId:i,className:l,required:s=!1}=e,c=o.useMemo(()=>a.find(e=>e.id===r),[a,r]),u=o.useCallback(e=>{i(e)},[i]);return(0,t.jsxs)("div",{className:(0,L.A)("space-y-2",l),children:[(0,t.jsx)(O.J,{htmlFor:"categoryId",className:"text-sm font-medium text-foreground capitalize",children:"Category"}),(0,t.jsx)(n.P.div,{variants:q,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",children:(0,t.jsxs)(R,{name:"categoryId",onValueChange:u,value:r,required:s,children:[(0,t.jsx)(I,{id:"categoryId",className:(0,L.A)("w-full h-12 bg-background border border-input rounded-xl","text-foreground placeholder-muted-foreground","focus:ring-2 focus:ring-primary focus:border-primary","hover:bg-accent/50 transition-all duration-200","bg-gradient-to-r from-primary/10 to-secondary/10"),"aria-label":"Select product category","aria-required":s,children:(0,t.jsx)(D,{placeholder:"Select a category",children:(null==c?void 0:c.name)||"Select a category"})}),(0,t.jsx)(d.N,{children:(0,t.jsx)(U,{className:(0,L.A)("bg-background border border-border rounded-xl shadow-lg","text-foreground max-h-60 overflow-y-auto z-50"),children:(0,t.jsx)(n.P.div,{variants:z,initial:"initial",animate:"animate",exit:"exit",children:(0,t.jsx)(E,{children:a.length>0?a.map(e=>(0,t.jsx)(n.P.div,{variants:H,className:"px-4 py-2",children:(0,t.jsx)(B,{value:e.id,className:(0,L.A)("text-foreground hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground","transition-colors duration-150 cursor-pointer rounded-md"),children:e.name})},e.id)):(0,t.jsx)("div",{className:"px-4 py-2 text-muted-foreground italic","aria-live":"polite",children:"No categories available"})})})})})]})})]})});var _=r(62523),J=r(62525),K=r(84616),Q=function(e){return e.ProductTechS="ProductTechS",e.ProductAddonS="ProductAddonS",e}({});let $={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:-10,transition:{duration:.2}}},W={hidden:{opacity:0,scale:.95,transition:{duration:.2}},visible:{opacity:1,scale:1,transition:{duration:.2}},hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95,transition:{duration:.1}}};function Y(e){let{onChange:a,index:r,item:i,currentState:n,optionKey:d}=e,s=(0,o.useMemo)(()=>[l.PackageOption.FullStack,l.PackageOption.Backend,l.PackageOption.Frontend,l.PackageOption.UI,l.PackageOption.UX],[]),c=(0,o.useMemo)(()=>s.filter(e=>!n.some(a=>a.name===e)||i.name===e),[n,i.name]);return(0,t.jsxs)(R,{onValueChange:e=>a("name",e),value:i.name||"",required:!0,children:[(0,t.jsx)(I,{className:(0,L.A)("w-full p-3 rounded-md bg-background text-foreground border border-input","focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background","hover:bg-accent/50"),"aria-label":"Select addon option","aria-required":"true",children:(0,t.jsx)(D,{placeholder:"Select Addon"})}),(0,t.jsx)(U,{className:(0,L.A)("rounded-xl shadow-lg z-50 max-h-64 overflow-y-auto","bg-background border border-border text-foreground"),children:(0,t.jsx)(E,{children:c.length>0?c.map((e,a)=>(0,t.jsx)(B,{value:e,className:(0,L.A)("text-foreground hover:bg-accent hover:text-accent-foreground","transition-all duration-200 cursor-pointer py-2 px-4"),children:e},a)):(0,t.jsx)("div",{className:"text-muted-foreground text-center py-2",children:"No options available"})})})]})}let X=function(e){let{state:a,setState:r,optionKey:i,className:l,placeholder:s="Enter option",validate:c=()=>null}=e,[u,p]=(0,o.useState)(!1),g="ProductTechS"===i,m=g||a.length<1,{addOption:f,onChange:h,removeOption:b}=(0,o.useCallback)(()=>({addOption:async()=>{if(!g&&a.length>=1)return void x.oR.error("Only one addon is allowed.",{icon:(0,t.jsx)(J.A,{className:"w-5 h-5 text-red-400"}),style:{backgroundColor:"#4E1313",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}});p(!0);try{if(a.length>0){let e=a[a.length-1],r=c(e);if(r)return void x.oR.error(r,{icon:(0,t.jsx)(J.A,{className:"w-5 h-5 text-red-400"}),style:{backgroundColor:"#4E1313",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}r(e=>[...e,{name:""}]),x.oR.success("".concat(g?"Technology":"Addon"," added"),{icon:(0,t.jsx)(K.A,{className:"w-5 h-5 text-green-400"}),style:{backgroundColor:"#1A3C34",color:"#6EE7B7",border:"1px solid #6EE7B7",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}catch(e){x.oR.error("Failed to add option",{icon:(0,t.jsx)(J.A,{className:"w-5 h-5 text-red-400"}),style:{backgroundColor:"#4E1313",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}finally{p(!1)}},onChange:(e,a)=>{r(r=>{let t=[...r];return t[e]=a,t})},removeOption:e=>{r(a=>a.filter((a,r)=>r!==e)),x.oR.success("".concat(g?"Technology":"Addon"," removed"),{icon:(0,t.jsx)(J.A,{className:"w-5 h-5 text-green-400"}),style:{backgroundColor:"#1A3C34",color:"#6EE7B7",border:"1px solid #6EE7B7",borderRadius:"10px",padding:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}})}}),[r,a,c,g])();return(0,t.jsxs)("div",{className:(0,L.A)("space-y-6",l),children:[(0,t.jsx)(d.N,{children:a.length>0&&(0,t.jsx)(n.P.ul,{className:"space-y-4",initial:"hidden",animate:"visible",exit:"exit",variants:{visible:{transition:{staggerChildren:.1}}},children:a.map((e,r)=>{var o;return(0,t.jsxs)(n.P.li,{variants:$,className:(0,L.A)("flex items-end gap-4 p-4 rounded-xl shadow-sm","bg-background border border-border","hover:shadow-md transition-all duration-300"),role:"listitem","aria-label":"".concat(g?"Technology":"Addon"," option ").concat(r+1),children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(O.J,{className:"text-sm font-medium text-foreground",htmlFor:"".concat(i,"-").concat(r,"-name"),children:g?"Technology":"Addon Name"}),g?(0,t.jsx)(_.p,{id:"".concat(i,"-").concat(r,"-name"),type:"text",placeholder:s,value:null!=(o=e.name)?o:"",onChange:a=>h(r,{...e,name:a.target.value}),className:(0,L.A)("w-full p-3 rounded-md bg-background text-foreground border border-input","focus:ring-2 focus:ring-primary focus:border-primary","placeholder-muted-foreground"),required:!0,"aria-required":"true"}):(0,t.jsx)(Y,{item:e,onChange:(a,t)=>h(r,{...e,[a]:t}),index:r,currentState:a,optionKey:i})]}),(0,t.jsx)(n.P.div,{variants:W,whileHover:"hover",whileTap:"tap",children:(0,t.jsx)(v.$,{type:"button",variant:"outline",size:"icon",onClick:()=>b(r),className:(0,L.A)("flex-shrink-0 border-destructive text-destructive hover:bg-destructive/10 hover:text-destructive","focus:ring-2 focus:ring-destructive focus:ring-offset-2 focus:ring-offset-background"),"aria-label":"Remove ".concat(g?"technology":"addon"," option ").concat(r+1),children:(0,t.jsx)(J.A,{className:"w-5 h-5"})})})]},r)})})}),(0,t.jsx)(d.N,{children:m&&(0,t.jsx)(n.P.div,{variants:W,initial:"hidden",animate:"visible",exit:"hidden",whileHover:"hover",whileTap:"tap",children:(0,t.jsxs)(v.$,{type:"button",variant:"outline",className:(0,L.A)("w-full py-3 rounded-xl shadow-sm","bg-gradient-to-r from-primary to-secondary text-primary-foreground border border-primary/50","hover:bg-primary/80 hover:border-primary focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background","flex items-center justify-center gap-2",u&&"opacity-50 cursor-not-allowed"),onClick:f,disabled:u,"aria-label":"Add new ".concat(g?"technology":"addon"," option"),"aria-disabled":u?"true":"false",children:[(0,t.jsx)(K.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:g?"Add Technology":"Add Addon"}),u&&(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 ml-2 text-primary-foreground",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})]})})})]})};var Z=r(22915),G=r(311),ee=r(35169),ea=r(84355),er=r(94631),et=r(26446);let eo={initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.9,transition:{duration:.6,ease:"easeInOut"}}},ei=()=>(0,t.jsxs)(n.P.div,{className:"fixed inset-0 flex items-center justify-center bg-gray-900/95 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,t.jsx)(n.P.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-16 w-16 border-t-4 border-indigo-500 rounded-full"}),(0,t.jsx)(n.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"absolute mt-24 text-indigo-200 text-lg font-medium",children:"Saving your product..."})]}),en=e=>{let{selectedImage:a,setSelectedImage:r,className:i}=e,d=(0,o.useCallback)(e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];t&&t.size<=5242880?r(URL.createObjectURL(t)):x.oR.error("Image must be under 5MB",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}})},[r]);return(0,t.jsxs)(n.P.div,{className:(0,f.cn)("group relative w-56 h-56 overflow-hidden rounded-xl border-2 border-indigo-600/30 shadow-lg hover:shadow-xl transition-all duration-300",i),whileHover:{scale:1.03},whileTap:{scale:.97},children:[a?(0,t.jsx)(y.default,{src:a,alt:"Product Image",width:224,height:224,className:"rounded-xl object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-gray-800/50 rounded-xl flex items-center justify-center",children:(0,t.jsx)(ea.A,{className:"w-12 h-12 text-indigo-400"})}),(0,t.jsxs)("div",{className:(0,f.cn)("absolute inset-0 bg-indigo-600/20 flex items-center justify-center transition-opacity duration-300",a?"group-hover:opacity-100 opacity-0":"opacity-100"),children:[(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"image-upload",onChange:d,name:"image","aria-label":"Upload product image"}),(0,t.jsx)("label",{htmlFor:"image-upload",className:"w-full h-full flex items-center justify-center cursor-pointer",children:(0,t.jsx)(ea.A,{className:"w-10 h-10 text-indigo-200 drop-shadow-md"})})]})]})},ed=e=>{let{pending:a,product:r}=e,[i,d]=(0,o.useState)({pending:!1,status:null,message:""}),l=(0,o.useCallback)(async e=>{try{d(e=>({...e,pending:!0}));let a=await m(e);d(e=>({...e,status:a.status,message:a.message}))}catch(e){console.error("[FormActions] Delete error:",e),d(e=>({...e,status:500,message:"An unexpected error occurred"}))}finally{d(e=>({...e,pending:!1}))}},[]);return(0,o.useEffect)(()=>{if(i.message&&i.status&&!i.pending){let e=200===i.status;x.oR[e?"success":"error"](i.message,{icon:e?(0,t.jsx)(Z.A,{className:"w-5 h-5 text-green-400"}):(0,t.jsx)(G.A,{className:"w-5 h-5 text-red-400"}),style:{background:e?"linear-gradient(135deg, #1A3C34, #2D6A4F)":"linear-gradient(135deg, #4E1313, #7F1D1D)",color:e?"#6EE7B7":"#FCA5A5",border:"1px solid ".concat(e?"#6EE7B7":"#FCA5A5"),borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"12px"},position:"top-right",duration:3e3})}},[i.message,i.status,i.pending]),(0,t.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[(0,t.jsxs)("div",{className:(0,f.cn)("grid",r?"grid-cols-2":"grid-cols-1","gap-4"),children:[(0,t.jsx)(n.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(v.$,{type:"submit",disabled:a,className:(0,f.cn)("bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 rounded-lg","hover:from-indigo-700 hover:to-purple-700 border border-indigo-600/30","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2",a&&"opacity-60 cursor-not-allowed"),"aria-label":r?"Update product":"Add product",children:a?(0,t.jsx)(er.A,{className:"w-5 h-5 text-white animate-spin"}):r?"Update Product":"Add Product"})}),r&&(0,t.jsx)(n.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(v.$,{variant:"outline",disabled:i.pending,onClick:()=>l(r.id),className:(0,f.cn)("border-indigo-600/30 text-indigo-300 font-semibold py-3 rounded-lg","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2",i.pending&&"opacity-60 cursor-not-allowed"),"aria-label":"Delete product",children:i.pending?(0,t.jsx)(er.A,{className:"w-5 h-5 text-indigo-300 animate-spin"}):"Delete Product"})})]}),(0,t.jsx)(n.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(b(),{href:"/".concat(s.BV.ADMIN,"/").concat(s.bQ.MENU_ITEMS),className:(0,v.r)({variant:"outline",className:(0,f.cn)("w-full text-center font-semibold border border-indigo-600/30","py-3 rounded-lg text-indigo-300","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","shadow-lg hover:shadow-xl transition-all duration-300")}),"aria-label":"Cancel and return to menu items",children:"Cancel"})})]})},el=e=>{let{productTechs:a,setProductTechs:r}=e;return(0,t.jsx)(w,{type:"single",collapsible:!0,className:"bg-gray-800/50 border border-indigo-600/30 rounded-xl shadow-md",children:(0,t.jsxs)(A,{value:"item-1",className:"border-none",children:[(0,t.jsx)(k,{className:(0,f.cn)("text-indigo-300 text-xl font-semibold px-4 py-3","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","transition-all duration-300"),"aria-label":"Toggle product technologies",children:"Product Technologies"}),(0,t.jsx)(C,{className:"px-4 py-3 text-indigo-200",children:(0,t.jsx)(X,{optionKey:Q.ProductTechS,state:a,setState:r,className:"bg-gray-800/50 text-indigo-200 border-indigo-600/30 rounded-lg",placeholder:"Add technology (e.g., React, TypeScript)",validate:e=>{var a;return(null==(a=e.name)?void 0:a.trim())?null:"Technology name is required"}})})]})})},es=e=>{let{productAddons:a,setProductAddons:r}=e;return(0,t.jsx)(w,{type:"single",collapsible:!0,className:"bg-gray-800/50 border border-indigo-600/30 rounded-xl shadow-md",children:(0,t.jsxs)(A,{value:"item-1",className:"border-none",children:[(0,t.jsx)(k,{className:(0,f.cn)("text-indigo-300 text-xl font-semibold px-4 py-3","hover:bg-indigo-600/20 hover:text-white","focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-gray-900","transition-all duration-300"),"aria-label":"Toggle product addons",children:"Product Addons"}),(0,t.jsx)(C,{className:"px-4 py-3 text-indigo-200",children:(0,t.jsx)(X,{optionKey:Q.ProductAddonS,state:a,setState:r,className:"bg-gray-800/50 text-indigo-200 border-indigo-600/30 rounded-lg",placeholder:"Select addon (e.g., FullStack, Backend)",validate:e=>{var a;return(null==(a=e.name)?void 0:a.trim())?Object.values(l.PackageOption).includes(e.name)?null:"Invalid addon name":"Addon name is required"}})})]})})},ec=function(e){var a,r,l,u,m,h,y,v,j;let{categories:N,product:w}=e,A=(0,i.useRouter)(),[k,C]=(0,o.useState)(null!=(m=null==w?void 0:w.image)?m:null),[P,S]=(0,o.useState)(null!=(y=null!=(h=null==w?void 0:w.categoryId)?h:null==(a=N[0])?void 0:a.id)?y:""),[F,R]=(0,o.useState)(null!=(v=null==w?void 0:w.ProductTech)?v:[]),[E,D]=(0,o.useState)(null!=(j=null==w?void 0:w.ProductAddon)?j:[{name:"Backend"}]),[I,T]=(0,o.useState)(!1),{getFormFields:M}=(0,c.A)({slug:"".concat(s.BV.ADMIN,"/").concat(s.bQ.MENU_ITEMS)}),[U,B]=(0,o.useState)(()=>{var e,a,r,t;return{name:null!=(e=null==w?void 0:w.name)?e:"",description:null!=(a=null==w?void 0:w.description)?a:"",liveDemoLink:null!=(r=null==w?void 0:w.liveDemoLink)?r:"",gitHubLink:null!=(t=null==w?void 0:w.gitHubLink)?t:""}}),[O,L,q]=(0,o.useActionState)(w?p.bind(null,{productId:w.id,options:{productTechs:F,productAddons:E}}):g.bind(null,{categoryId:P,options:{productTechs:F,productAddons:E}}),{message:"",error:{},status:null,formData:null});(0,o.useEffect)(()=>{if((201===O.status||200===O.status)&&!q){T(!0),x.oR.success(O.message||"Product saved successfully!",{icon:(0,t.jsx)(Z.A,{className:"w-5 h-5 text-green-400"}),style:{background:"linear-gradient(135deg, #1A3C34, #2D6A4F)",color:"#6EE7B7",border:"1px solid #6EE7B7",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"12px"},position:"top-right",duration:2500,className:"animate-pulse"});let e=setTimeout(()=>{A.push("/".concat(s.BV.ADMIN,"/").concat(s.bQ.MENU_ITEMS))},2e3);return()=>clearTimeout(e)}O.message&&O.status&&!q&&200!==O.status&&201!==O.status&&(x.oR.error(O.message,{icon:(0,t.jsx)(G.A,{className:"w-5 h-5 text-red-400"}),style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"12px"},position:"top-right",duration:3e3}),O.error&&Object.entries(O.error).forEach(e=>{let[a,r]=e;x.oR.error("Field Error: ".concat(a),{description:r,style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}})}))},[O.status,O.message,O.error,q,N,A]);let z=(0,o.useCallback)(e=>a=>{let r=a.target.value;console.log("[Form] Field Change: ".concat(e,' = "').concat(r,'" (type: ').concat(a.target.type,", id: ").concat(a.target.id,")")),B(a=>{let t={...a,[e]:r};return console.log("[Form] Updated formValues:",t),t})},[]);return(0,o.useEffect)(()=>{let e=M();console.log("[Form] Rendered Fields:",e),e.forEach(e=>{var a;console.log("[Form] FormFields Props for ".concat(e.name,":"),{name:e.name,type:e.type,value:null!=(a=U[e.name])?a:"",hasOnChange:!!z(e.name)})})},[U,z]),(0,t.jsx)(d.N,{mode:"wait",children:I?(0,t.jsx)(ei,{},"loader"):(0,t.jsxs)(n.P.form,{action:e=>{let a=["name","description"].filter(e=>!U[e]||""===U[e].toString().trim());if(a.length>0)return void x.oR.error("Please fill in: ".concat(a.join(", ")),{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});if(!w&&!k){var r;let a=document.querySelector("#image-upload");if(!(null==a||null==(r=a.files)?void 0:r[0]))return void x.oR.error("Please upload an image",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});e.append("image",a.files[0])}if(!P)return void x.oR.error("Please select a category",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});if(1!==E.length)return void x.oR.error("Exactly one product addon is required",{style:{background:"linear-gradient(135deg, #4E1313, #7F1D1D)",color:"#FCA5A5",border:"1px solid #FCA5A5",borderRadius:"12px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.3)"}});e.append("categoryId",P),Object.entries(U).forEach(a=>{let[r,t]=a,o=(null==t?void 0:t.toString())||"";e.append(r,o),console.log("[Form] Appending to FormData: ".concat(r,' = "').concat(o,'"'))}),e.append("productTechs",JSON.stringify(F)),e.append("productAddons",JSON.stringify(E));let t={};e.forEach((e,a)=>{t[a]=e instanceof File?"[File: ".concat(e.name,"]"):e}),console.log("[Form] FormData Keys:",Array.from(e.keys())),console.log("[Form] FormData:",t),L(e)},variants:eo,initial:"initial",animate:"animate",exit:"exit",className:"relative flex flex-col md:flex-row gap-8 p-8 bg-gray-900/90 rounded-2xl shadow-2xl border border-indigo-600/30 max-w-4xl mx-auto backdrop-blur-md",role:"form","aria-labelledby":"product-form-title",children:[(0,t.jsx)("h2",{id:"product-form-title",className:"sr-only",children:w?"Update Product":"Add Product"}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsxs)(b(),{href:"/".concat(s.BV.ADMIN,"/").concat(s.bQ.MENU_ITEMS),className:"flex items-center gap-2 text-indigo-400 hover:text-indigo-200 transition-colors duration-300 group","aria-label":"Back to menu items",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Back to Menu"}),(0,t.jsx)(ee.A,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform duration-300"})]})}),(0,t.jsxs)(n.P.div,{className:"flex-shrink-0 pt-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[(0,t.jsx)(en,{className:(0,f.cn)("bg-gray-900/90 border border-indigo-600/30 rounded-xl p-3 shadow-md"),selectedImage:k,setSelectedImage:C}),(null==O||null==(r=O.error)?void 0:r.image)&&(0,t.jsxs)(n.P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,f.cn)("text-sm text-red-400 font-medium text-center mt-3 flex items-center gap-2 bg-red-500/10 border border-red-500/30 rounded-lg p-2"),"aria-live":"polite",children:[(0,t.jsx)("span",{className:"text-red-400",children:"⚠"})," ",O.error.image]})]}),(0,t.jsxs)(n.P.div,{className:"flex-1 space-y-6 pt-8",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:[(0,t.jsx)("div",{className:"grid gap-4",children:M().map(e=>{var a,r,o,i,d,l,s,c,u,p,g,m;return(0,t.jsxs)(n.P.div,{className:"space-y-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:["gitHubLink"===e.name||"liveDemoLink"===e.name?(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:e.name,className:"text-indigo-300 font-medium text-sm",children:e.label}),(0,t.jsx)("input",{id:e.name,name:e.name,type:"url",placeholder:e.placeholder,pattern:e.pattern,value:null!=(d=U[e.name])?d:"",onChange:z(e.name),className:(0,f.cn)("w-full p-3 bg-gray-800/50 border border-indigo-600/30 rounded-lg","text-indigo-200 placeholder-indigo-400/50","focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400/50","transition-all duration-300",(null==O||null==(a=O.error)?void 0:a[e.name])&&"border-red-500/30"),"aria-label":null!=(s=null!=(l=e.ariaLabel)?l:e.label)?s:e.name})]}):(0,t.jsx)(et.A,{...e,type:e.type,error:null==O||null==(r=O.error)?void 0:r[e.name],value:null!=(c=U[e.name])?c:"",defaultValue:null!=(u=U[e.name])?u:"",onChange:z(e.name),pattern:null!=(p=e.pattern)?p:"",ariaLabel:null!=(m=null!=(g=e.ariaLabel)?g:e.label)?m:e.name,className:(0,f.cn)("w-full p-3 bg-gray-800/50 border border-indigo-600/30 rounded-lg","text-indigo-200 placeholder-indigo-400/50","focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400/50","transition-all duration-300",(null==O||null==(o=O.error)?void 0:o[e.name])&&"border-red-500/30")}),(null==O||null==(i=O.error)?void 0:i[e.name])&&(0,t.jsxs)(n.P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,f.cn)("text-sm text-red-400 font-medium mt-1 flex items-center gap-2 bg-red-500/10 border border-red-500/30 rounded-lg p-2"),"aria-live":"polite",children:[(0,t.jsx)("span",{className:"text-red-400",children:"⚠"}),O.error[e.name]]})]},e.name)})}),(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[(0,t.jsx)(V,{categoryId:P,categories:N,setCategoryId:S,className:(0,f.cn)("w-full p-3 bg-gray-800/50 border border-indigo-600/30 rounded-lg","text-indigo-200","focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400/50","transition-all duration-300",(null==O||null==(l=O.error)?void 0:l.categoryId)&&"border-red-500/30")}),(null==O||null==(u=O.error)?void 0:u.categoryId)&&(0,t.jsxs)(n.P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,f.cn)("text-sm text-red-400 font-medium mt-1 flex items-center gap-2 bg-red-500/10 border border-red-500/30 rounded-lg p-2"),"aria-live":"polite",children:[(0,t.jsx)("span",{className:"text-red-400",children:"⚠"})," ",O.error.categoryId]})]}),(0,t.jsx)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},children:(0,t.jsx)(el,{productTechs:F,setProductTechs:R})}),(0,t.jsx)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.6},children:(0,t.jsx)(es,{productAddons:E,setProductAddons:D})}),(0,t.jsx)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.7},children:(0,t.jsx)(ed,{pending:q,product:w})})]})]},"form")})}}}]);