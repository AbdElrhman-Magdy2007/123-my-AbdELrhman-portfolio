"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/jwt */ \"(middleware)/./node_modules/next-auth/jwt/index.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/middleware */ \"(middleware)/./node_modules/next-auth/middleware.js\");\n/* harmony import */ var next_auth_middleware__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_middleware__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _constants_enums__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants/enums */ \"(middleware)/./src/constants/enums.ts\");\n\n\n\n\n/**\r\n * Middleware to handle authentication and route protection.\r\n */ /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_auth_middleware__WEBPACK_IMPORTED_MODULE_2__.withAuth)(async function middleware(request) {\n    const url = request.nextUrl.clone();\n    const pathname = url.pathname;\n    console.log(\"Pathname:\", pathname);\n    const requestHeaders = new Headers(request.headers);\n    requestHeaders.set(\"x-url\", request.url);\n    const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n        request: {\n            headers: requestHeaders\n        }\n    });\n    // Authentication check\n    const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getToken)({\n        req: request,\n        secret: process.env.NEXTAUTH_SECRET\n    });\n    const isAuthenticated = !!token;\n    // Define route types\n    const isAuthPage = pathname.startsWith(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}`);\n    const protectedRoutes = [\n        _constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.PROFILE,\n        _constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.ADMIN\n    ];\n    const isProtectedRoute = protectedRoutes.some((route)=>pathname.startsWith(`/${route}`));\n    // Redirect unauthenticated users trying to access protected routes\n    if (!isAuthenticated && isProtectedRoute) {\n        const redirectUrl = new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.AUTH}${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Pages.LOGIN}`, request.url);\n        console.log(\"Redirecting to Login:\", redirectUrl.toString());\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n    }\n    // Redirect authenticated users trying to access auth pages\n    if (isAuthPage && isAuthenticated) {\n        const role = token?.role;\n        const redirectUrl = role === _constants_enums__WEBPACK_IMPORTED_MODULE_3__.UserRole.ADMIN ? new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.ADMIN}`, request.url) : new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.PROFILE}`, request.url);\n        console.log(\"Redirecting Authenticated User to:\", redirectUrl.toString());\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n    }\n    // Restrict access to admin routes for non-admin users\n    if (isAuthenticated && pathname.startsWith(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.ADMIN}`) && token?.role !== _constants_enums__WEBPACK_IMPORTED_MODULE_3__.UserRole.ADMIN) {\n        const redirectUrl = new URL(`/${_constants_enums__WEBPACK_IMPORTED_MODULE_3__.Routes.PROFILE}`, request.url);\n        console.log(\"Redirecting Non-Admin to Profile:\", redirectUrl.toString());\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(redirectUrl);\n    }\n    return response;\n}, {\n    callbacks: {\n        authorized: ()=>true\n    }\n}));\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico|robots.txt|sitemap.xml).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RDtBQUNILEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccmF5YVxcU2hvcHBpbmdDYXJ0XFxwb3J0Zm9saW8gLSBDb3B5IC0gQ29weSAtIENvcHkgLSBDb3B5IC0gQ29weVxcc3JjXFxtaWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tIFwibmV4dC1hdXRoL2p3dFwiO1xyXG5pbXBvcnQgeyB3aXRoQXV0aCB9IGZyb20gXCJuZXh0LWF1dGgvbWlkZGxld2FyZVwiO1xyXG5pbXBvcnQgeyBSb3V0ZXMsIFBhZ2VzLCBVc2VyUm9sZSB9IGZyb20gXCIuL2NvbnN0YW50cy9lbnVtc1wiO1xyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgdG8gaGFuZGxlIGF1dGhlbnRpY2F0aW9uIGFuZCByb3V0ZSBwcm90ZWN0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgd2l0aEF1dGgoXHJcbiAgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gICAgY29uc3QgdXJsID0gcmVxdWVzdC5uZXh0VXJsLmNsb25lKCk7XHJcbiAgICBjb25zdCBwYXRobmFtZSA9IHVybC5wYXRobmFtZTtcclxuICAgIGNvbnNvbGUubG9nKFwiUGF0aG5hbWU6XCIsIHBhdGhuYW1lKTtcclxuXHJcbiAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcXVlc3QuaGVhZGVycyk7XHJcbiAgICByZXF1ZXN0SGVhZGVycy5zZXQoXCJ4LXVybFwiLCByZXF1ZXN0LnVybCk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbiAgICAgIHJlcXVlc3Q6IHsgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEF1dGhlbnRpY2F0aW9uIGNoZWNrXHJcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFRva2VuKHsgcmVxOiByZXF1ZXN0LCBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCB9KTtcclxuICAgIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9ICEhdG9rZW47XHJcblxyXG4gICAgLy8gRGVmaW5lIHJvdXRlIHR5cGVzXHJcbiAgICBjb25zdCBpc0F1dGhQYWdlID0gcGF0aG5hbWUuc3RhcnRzV2l0aChgLyR7Um91dGVzLkFVVEh9YCk7XHJcbiAgICBjb25zdCBwcm90ZWN0ZWRSb3V0ZXMgPSBbUm91dGVzLlBST0ZJTEUsIFJvdXRlcy5BRE1JTl07XHJcbiAgICBjb25zdCBpc1Byb3RlY3RlZFJvdXRlID0gcHJvdGVjdGVkUm91dGVzLnNvbWUoKHJvdXRlKSA9PlxyXG4gICAgICBwYXRobmFtZS5zdGFydHNXaXRoKGAvJHtyb3V0ZX1gKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBSZWRpcmVjdCB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMgdHJ5aW5nIHRvIGFjY2VzcyBwcm90ZWN0ZWQgcm91dGVzXHJcbiAgICBpZiAoIWlzQXV0aGVudGljYXRlZCAmJiBpc1Byb3RlY3RlZFJvdXRlKSB7XHJcbiAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gbmV3IFVSTChgLyR7Um91dGVzLkFVVEh9JHtQYWdlcy5MT0dJTn1gLCByZXF1ZXN0LnVybCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVkaXJlY3RpbmcgdG8gTG9naW46XCIsIHJlZGlyZWN0VXJsLnRvU3RyaW5nKCkpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHJlZGlyZWN0VXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWRpcmVjdCBhdXRoZW50aWNhdGVkIHVzZXJzIHRyeWluZyB0byBhY2Nlc3MgYXV0aCBwYWdlc1xyXG4gICAgaWYgKGlzQXV0aFBhZ2UgJiYgaXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgIGNvbnN0IHJvbGUgPSB0b2tlbj8ucm9sZSBhcyBVc2VyUm9sZTtcclxuICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPVxyXG4gICAgICAgIHJvbGUgPT09IFVzZXJSb2xlLkFETUlOXHJcbiAgICAgICAgICA/IG5ldyBVUkwoYC8ke1JvdXRlcy5BRE1JTn1gLCByZXF1ZXN0LnVybClcclxuICAgICAgICAgIDogbmV3IFVSTChgLyR7Um91dGVzLlBST0ZJTEV9YCwgcmVxdWVzdC51cmwpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlJlZGlyZWN0aW5nIEF1dGhlbnRpY2F0ZWQgVXNlciB0bzpcIiwgcmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QocmVkaXJlY3RVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlc3RyaWN0IGFjY2VzcyB0byBhZG1pbiByb3V0ZXMgZm9yIG5vbi1hZG1pbiB1c2Vyc1xyXG4gICAgaWYgKFxyXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQgJiZcclxuICAgICAgcGF0aG5hbWUuc3RhcnRzV2l0aChgLyR7Um91dGVzLkFETUlOfWApICYmXHJcbiAgICAgIHRva2VuPy5yb2xlICE9PSBVc2VyUm9sZS5BRE1JTlxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gbmV3IFVSTChgLyR7Um91dGVzLlBST0ZJTEV9YCwgcmVxdWVzdC51cmwpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlJlZGlyZWN0aW5nIE5vbi1BZG1pbiB0byBQcm9maWxlOlwiLCByZWRpcmVjdFVybC50b1N0cmluZygpKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChyZWRpcmVjdFVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gIH0sXHJcbiAge1xyXG4gICAgY2FsbGJhY2tzOiB7XHJcbiAgICAgIGF1dGhvcml6ZWQ6ICgpID0+IHRydWUsIC8vIExldCBtaWRkbGV3YXJlIGhhbmRsZSBjaGVja3NcclxuICAgIH0sXHJcbiAgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBtYXRjaGVyOiBbXHJcbiAgICBcIi8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3xyb2JvdHMudHh0fHNpdGVtYXAueG1sKS4qKVwiLFxyXG4gIF0sXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRUb2tlbiIsIndpdGhBdXRoIiwiUm91dGVzIiwiUGFnZXMiLCJVc2VyUm9sZSIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwidXJsIiwibmV4dFVybCIsImNsb25lIiwicGF0aG5hbWUiLCJjb25zb2xlIiwibG9nIiwicmVxdWVzdEhlYWRlcnMiLCJIZWFkZXJzIiwiaGVhZGVycyIsInNldCIsInJlc3BvbnNlIiwibmV4dCIsInRva2VuIiwicmVxIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsImlzQXV0aGVudGljYXRlZCIsImlzQXV0aFBhZ2UiLCJzdGFydHNXaXRoIiwiQVVUSCIsInByb3RlY3RlZFJvdXRlcyIsIlBST0ZJTEUiLCJBRE1JTiIsImlzUHJvdGVjdGVkUm91dGUiLCJzb21lIiwicm91dGUiLCJyZWRpcmVjdFVybCIsIlVSTCIsIkxPR0lOIiwidG9TdHJpbmciLCJyZWRpcmVjdCIsInJvbGUiLCJjYWxsYmFja3MiLCJhdXRob3JpemVkIiwiY29uZmlnIiwibWF0Y2hlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});